name: test
on: [push]
jobs:
    release:
        runs-on: ubuntu-latest
        steps:
            - name: Check out code
              uses: actions/checkout@v2
            - name: Build and install the darknode-cli
              run: |
                  mkdir -p $HOME/.darknode/bin
                  make
                  mv $(make target_name) $HOME/.darknode/bin/darknode
                  export PATH=$PATH:$HOME/.darknode/bin
                  darknode --version
            - name: Test darknode deployment
              env:
                  aws_access_key : ${{ secrets.AWS_ACCESS_KEY_ID}}
                  aws_secret_key : ${{ secrets.AWS_SECRET_ACCESS_KEY}}
              run: |
                  chmod +x ./test/up.sh
                  ./test/up.sh





